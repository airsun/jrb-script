<html>
<head>
<title>集团GPON-B类ONU一网通宽带脚本</title>
<script type="text/javascript" src="script.js"></script>
<script type="text/javascript" src="display.js"></script>
<script type="text/javascript">
  $j = jQuery.noConflict();
</script>
</head>
<font family:宋体>
<font size=4>
<body>
<p id="template" style="display:none">
	  设备描述 ${sysname}  SN ${auth}    ONT-ID  0/${gpon}/${ont0}:${ont1} <br/>
	  <br/>
	  管理IP ${ip1}  管理网关 ${ip2}   sysman mac-address ${mac} <br/>
	  <br/>
		OLT上行端口 0/${uplink0} ${uplink1}<br/>
		<br/>
		<span id="s_t" style="display:none; font-size:18px;">
		******************************************************************************************************************
		<br/>
		<br/>
		OLT双层VLAN配置<br/>
		<br/>
		vlan ${(gpon-1)*16+31+ont0} smart<br/>
		vlan attrib ${(gpon-1)*16+31+ont0} q-in-q <br/> 
		port vlan ${(gpon-1)*16+31+ont0} 0/${uplink0} ${uplink1} <br/>
		<br/>
		<br/>
		******************************************************************************************************************
		<br/>
		OLT注册ONU配置<br/>
		<br/>
    interface  gpon  0/${gpon}<br/>
    <br/>
    ont  add  ${ont0} ${ont1} sn-auth  ${auth} snmp ont-lineprofile-name JTGFTTBUnlimited500M desc ${sysname}<br/>
    <br/>
    ont snmp-profile ${ont0} ${ont1} profile-id 3<br/>
    <br/>
    ont ipconfig ${ont0} ${ont1} static ip-address ${ip1} mask 255.255.255.0 gateway ${ip2} vlan 4020 priority 6<br/>
    <br/>
    quit<br/>
    <br/>
    <br/>
    service-port vlan 4020 gpon 0/${gpon}/${ont0} ont ${ont1} gemport 16 multi-service user-vlan 4020 inbound traffic-table index 20 outbound traffic-table index 20<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+1} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+2} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+3} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+4} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+5} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+6} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+7} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+8} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+9} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+10} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+11} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+12} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+13} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+14} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+15} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+16} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+17} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+18} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+19} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+20} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+21} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+22} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		service-port vlan ${(gpon-1)*16+31+ont0} gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan ${(ont1*24)+159+23} inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
		<br/>
		<br/>
    service-port vlan 4015 gpon 0/${gpon}/${ont0} ont ${ont1} gemport 16 multi-service user-vlan 4015 inbound traffic-table index 16 outbound traffic-table index 16<br/>
		<br/>
    service-port vlan 3951 gpon 0/${gpon}/${ont0} ont ${ont1} gemport 15 multi-service user-vlan 4020 inbound traffic-table index 15 outbound traffic-table index 15<br/>
		<br/>
    service-port vlan 1031 gpon 0/${gpon}/${ont0} ont ${ont1} gemport 14 multi-service user-vlan 4020 inbound traffic-table index 14 outbound traffic-table index 14<br/>
		<br/>
    service-port vlan 4032 gpon 0/${gpon}/${ont0} ont ${ont1} gemport 14 multi-service user-vlan 4020 inbound traffic-table index 14 outbound traffic-table index 14<br/>
		<br/>
    service-port vlan 4031 gpon 0/${gpon}/${ont0} ont ${ont1} gemport 10 multi-service user-vlan 4020 inbound traffic-table index 10 outbound traffic-table index 10<br/>
		<br/>
    service-port vlan 3033 gpon 0/${gpon}/${ont0} ont ${ont1} gemport 12 multi-service user-vlan 4020 inbound traffic-table index 12 outbound traffic-table index 12<br/>
		<br/>
    service-port vlan 2030 gpon 0/${gpon}/${ont0} ont ${ont1} gemport 14 multi-service user-vlan 4020 inbound traffic-table index 14 outbound traffic-table index 14<br/>
		<br/>
		<br/>
		******************************************************************************************************************<br/>
		<br/>
		ONU宽带业务配置<br/>
		<br/>
		telnet ${ip1}<br/>
		<br/>
		root<br/>
		mduadmin<br/>
		<br/>
		enable<br/>
		<br/>
		config<br/>
		<br/>
		sysname ${sysname}<br/>
		time @{time}<br/>
		<br/>
		ntp-service  unicast-server  211.103.11.147<br/>
    <br/>
    <br/>
    queue-scheduler wrr 20 10 20 10 40 0 0 0<br/>
    <br/>
    traffic table ip index 10 name "putongkuandai" cir off priority user-cos 0 priority-policy tag-In-Package<br/>
    <br/>
    traffic table ip index 12 name "dakehu" cir off priority 2 priority-policy tag-in-package<br/>
    <br/>
    traffic table ip index 14 name "shipin" cir off priority 4 priority-policy tag-in-package<br/>
    <br/>
    traffic table ip index 15 name "yuyin" cir off priority 5 priority-policy tag-in-package<br/>
    <br/>
    traffic table ip index 16 name "wangluokongzhi" cir off priority 6 priority-policy tag-in-package<br/>
    <br/>
		board confirm 0<br/>
		<br/>
		<br/>
		autos  time on<br/>
		autos time 13:00:00<br/>
		security mac-filter source ${mac} <br/>
		<br/>
		<br/>
		<br/>
		vlan ${(ont1*24)+159} to ${(ont1*24)+159+23}  mux<br/>
		y<br/>
		<br/>
		port vlan  ${(ont1*24)+159} to ${(ont1*24)+159+23}  0/0  0 <br/>
		y<br/>
		<br/>
		port vlan  ${(ont1*24)+159} to ${(ont1*24)+159+23}  0/0  1 <br/>
		y<br/>
		<br/>
		port vlan  ${(ont1*24)+159} to ${(ont1*24)+159+23}  0/0  2 <br/>
		y<br/>
		<br/>
		<br/>
		multi-service-port from-vlan ${(ont1*24)+159} board 1 user-vlan untagged  rx-cttr 10 tx-cttr 10 <br/>
		y<br/>
		<br/>
		multi-service-port from-vlan ${(ont1*24)+159+8} board 2 user-vlan untagged  rx-cttr 10 tx-cttr 10 <br/>
		y<br/>
		<br/>
		multi-service-port from-vlan ${(ont1*24)+159+16} board 4 user-vlan untagged  rx-cttr 10 tx-cttr 10 <br/>
		y<br/>
		<br/>
    <br/>
    <br/>
    <br/>
    vlan 4015 smart <br/>
    <br/>
    vlan 3951 smart <br/>
    <br/>
    vlan 1031 smart <br/>
    <br/>
    vlan 4032 smart <br/>
    <br/>
    vlan 4031 smart <br/>
    <br/>
    vlan 3033 smart <br/>
    <br/>
    vlan 2030 smart <br/>
    <br/>
    port vlan 4015 0/0 0 <br/>
    <br/>
    port vlan 4015 0/0 1 <br/>
    <br/>
    port vlan 4015 0/0 2 <br/>
    <br/>
    port vlan 3951 0/0 0 <br/>
    <br/>
    port vlan 3951 0/0 1 <br/>
    <br/>
    port vlan 3951 0/0 2 <br/>
    <br/>
    port vlan 1031 0/0 0 <br/>
    <br/>
    port vlan 1031 0/0 1 <br/>
    <br/>
    port vlan 1031 0/0 2 <br/>
    <br/>
    port vlan 4032 0/0 0 <br/>
    <br/>
    port vlan 4032 0/0 1 <br/>
    <br/>
    port vlan 4032 0/0 2 <br/>
    <br/>
    port vlan 4031 0/0 0 <br/>
    <br/>
    port vlan 4031 0/0 1 <br/>
    <br/>
    port vlan 4031 0/0 2 <br/>
    <br/>
    port vlan 3033 0/0 0 <br/>
    <br/>
    port vlan 3033 0/0 1 <br/>
    <br/>
    port vlan 3033 0/0 2 <br/>
    <br/>
    port vlan 2030 0/0 0 <br/>
    <br/>
    port vlan 2030 0/0 1 <br/>
    <br/>
    port vlan 2030 0/0 2 <br/>
    <br/>
    <br/>
		multi-service-port  vlan  4015  board 1-4 user-vlan 4015 rx-cttr 16 tx-cttr 16 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  3951  board 1-4 user-vlan 3951 rx-cttr 15 tx-cttr 15 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  1031  board 1-4 user-vlan 1031 rx-cttr 14 tx-cttr 14 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  4032  board 1-4 user-vlan 4032 rx-cttr 14 tx-cttr 14 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  4031  board 1-4 user-vlan 4031 rx-cttr 10 tx-cttr 10 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  3033  board 1-4 user-vlan 3033 rx-cttr 12 tx-cttr 12 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  2030  board 1-4 user-vlan 2030 rx-cttr 14 tx-cttr 14 <br/>
		y<br/>
		<br/>
		<br/>
		<br/>
		multi-service-port  vlan  4015  board 1 user-vlan 4015 rx-cttr 16 tx-cttr 16 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  3951  board 1 user-vlan 3951 rx-cttr 15 tx-cttr 15 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  1031  board 1 user-vlan 1031 rx-cttr 14 tx-cttr 14 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  4032  board 1 user-vlan 4032 rx-cttr 14 tx-cttr 14 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  4031  board 1 user-vlan 4031 rx-cttr 10 tx-cttr 10 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  3033  board 1 user-vlan 3033 rx-cttr 12 tx-cttr 12 <br/>
		y<br/>
		<br/>
		multi-service-port  vlan  2030  board 1 user-vlan 2030 rx-cttr 14 tx-cttr 14 <br/>
		y<br/>
    <br/>
    <br/>
		<br/>
    <br/>
    </span>
</p>
<form name="form" action="#">
	<div id="entry_area">
		<!-- 生成输入区域HTML -->
		<script type="text/javascript">
			readyTemplate();
		</script>
	</div>
	<input type="button" value="生成" onclick="generate()" /> 
	<input type="button" value="刷新" onclick=location.reload()>
	<div id="output_area">
		<!-- 生产结果区域 -->
	</div>
</form>
</body>
</html>